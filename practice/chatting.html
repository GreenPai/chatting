<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì±„íŒ… ë·°</title>
    <link rel="stylesheet" href="chat.css" />
    <style>
      /* chat.css */

      /* ì „ì²´ ì»¨í…Œì´ë„ˆ */
      .chat-container {
        display: flex;
        flex-direction: column;
        width: 100%;
        max-width: 600px;
        height: 80vh;
        border: 1px solid #ddd;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        margin: 40px auto;
        background-color: #fafafa;
        font-family: "ë§‘ì€ ê³ ë”•", sans-serif;
      }

      /* í—¤ë” */
      .chat-header {
        flex: 0 0 auto;
        padding: 12px 16px;
        background-color: #f0f0f0;
        border-bottom: 1px solid #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .chat-title {
        margin: 0;
        font-size: 1.2rem;
        font-weight: bold;
        color: #333;
      }

      .chat-welcome {
        font-size: 0.9rem;
        color: #555;
      }

      /* ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸ ì˜ì—­ */
      .chat-messages {
        flex: 1 1 auto;
        display: flex;
        flex-direction: column;
        padding: 16px;
        overflow-y: auto;
        background-color: #ececec;
      }

      /* ê°œë³„ ë©”ì‹œì§€ ê³µí†µ ìŠ¤íƒ€ì¼ */
      .chat-message {
        display: flex;
        flex-direction: column;
        margin-bottom: 12px;
        max-width: 70%;
        padding: 8px 12px;
        border-radius: 12px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        word-break: keep-all;
        white-space: pre-wrap;
      }

      /* ë‚´ê°€ ë³´ë‚¸ ë©”ì‹œì§€ */
      .chat-message.mine {
        align-self: flex-end;
        background-color: #dcf8c6;
      }

      /* ë‹¤ë¥¸ ì‚¬ëŒì´ ë³´ë‚¸ ë©”ì‹œì§€ */
      .chat-message.other {
        align-self: flex-start;
        background-color: #fff;
      }

      /* ë©”ì‹œì§€ ë©”íƒ€ (ì‚¬ìš©ìëª… + ì‹œê°„) */
      .message-meta {
        display: flex;
        justify-content: space-between;
        margin-bottom: 4px;
        font-size: 0.75rem;
        color: #555;
      }

      .message-user {
        font-weight: bold;
      }

      .message-time {
        margin-left: 8px;
      }

      /* ë©”ì‹œì§€ ë‚´ìš© */
      .message-content {
        font-size: 1rem;
        color: #333;
      }

      /* ì…ë ¥ì°½ ì˜ì—­ */
      .chat-input-area {
        flex: 0 0 auto;
        display: flex;
        padding: 8px 12px;
        border-top: 1px solid #ddd;
        background-color: #f9f9f9;
      }

      .chat-input {
        flex: 1;
        resize: none;
        border-radius: 4px;
        border: 1px solid #ccc;
        padding: 8px;
        font-size: 1rem;
        height: 60px;
        margin-right: 8px;
        background-color: #fff;
        color: #333;
      }

      .chat-input::placeholder {
        color: #999;
      }

      .chat-send-button {
        background-color: #007aff;
        color: #fff;
        border: none;
        border-radius: 4px;
        padding: 0 16px;
        font-size: 1rem;
        cursor: pointer;
      }

      .chat-send-button:hover {
        background-color: #005ec5;
      }
    </style>
  </head>
  <body>
    <div class="chat-container">
      <!-- í—¤ë” -->
      <header class="chat-header">
        <div class="chat-title">ì±„íŒ…ë°©: room-1</div>
        <div class="chat-welcome">ì•ˆë…•í•˜ì„¸ìš”, í™ê¸¸ë™ë‹˜!</div>
      </header>

      <!-- ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸ ì˜ì—­ -->
      <div class="chat-messages" id="messages">
        <!-- ë”ë¯¸ ë©”ì‹œì§€ ì˜ˆì‹œ -->
        <div class="chat-message other">
          <div class="message-meta">
            <span class="message-user">ë¯¼ìˆ˜</span>
            <span class="message-time">10:01 AM</span>
          </div>
          <div class="message-content">ì•ˆë…•! ì˜ ì§€ëƒˆì–´?</div>
        </div>

        <div class="chat-message mine">
          <div class="message-meta">
            <span class="message-user">í™ê¸¸ë™</span>
            <span class="message-time">10:02 AM</span>
          </div>
          <div class="message-content">ì‘, ì˜ ì§€ëƒˆì–´~ ë„Œ?</div>
        </div>

        <div class="chat-message other">
          <div class="message-meta">
            <span class="message-user">ë¯¼ìˆ˜</span>
            <span class="message-time">10:03 AM</span>
          </div>
          <div class="message-content">ë‚˜ë„ ì¢‹ì•„! ì£¼ë§ì— ì‹œê°„ ë¼?</div>
        </div>

        <div class="chat-message other">
          <div class="message-meta">
            <span class="message-user">ì˜í¬</span>
            <span class="message-time">10:04 AM</span>
          </div>
          <div class="message-content">ë¼ì–´ë“¤ì–´ë„ ë˜ë‹ˆ? ì €ë„ ê°™ì´í• ê²Œìš” ğŸ˜Š</div>
        </div>
        <!-- /ë”ë¯¸ ë©”ì‹œì§€ ì˜ˆì‹œ -->

        <!-- ìë™ ìŠ¤í¬ë¡¤ìš© ë¹ˆ div -->
        <div id="bottom-anchor"></div>
      </div>

      <!-- ì…ë ¥ì°½ ì˜ì—­ -->
      <div class="chat-input-area">
        <textarea
          class="chat-input"
          id="inputMessage"
          placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
        ></textarea>
        <button class="chat-send-button" id="sendBtn">ì „ì†¡</button>
      </div>
    </div>

    <script>
      // í˜ì´ì§€ ë¡œë“œ ì‹œ, ë§¨ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤
      window.addEventListener("DOMContentLoaded", () => {
        const messagesDiv = document.getElementById("messages");
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
      });

      // (ì„ íƒ) ì „ì†¡ ë²„íŠ¼ í´ë¦­ ì‹œ ì…ë ¥ì°½ ë‚´ìš©ì„ ì½ì–´ì„œ ìƒˆë¡œìš´ ë©”ì‹œì§€ ì¶”ê°€í•´ ë³´ê¸°
      // ì‹¤ì œ ì„œë²„ ì—°ê²°ì´ ì—†ìœ¼ë¯€ë¡œ í™”ë©´ì—ë§Œ ì°íˆëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.
      document.getElementById("sendBtn").addEventListener("click", () => {
        const inputEl = document.getElementById("inputMessage");
        const text = inputEl.value.trim();
        if (!text) return;

        // ìƒˆë¡œìš´ ë©”ì‹œì§€ DOM ìƒì„±
        const newMsg = document.createElement("div");
        newMsg.classList.add("chat-message", "mine");

        const meta = document.createElement("div");
        meta.classList.add("message-meta");
        const userSpan = document.createElement("span");
        userSpan.classList.add("message-user");
        userSpan.textContent = "í™ê¸¸ë™"; // í•˜ë“œì½”ë”© ì˜ˆì‹œ
        const timeSpan = document.createElement("span");
        timeSpan.classList.add("message-time");
        const now = new Date();
        const hh = now.getHours().toString().padStart(2, "0");
        const mm = now.getMinutes().toString().padStart(2, "0");
        timeSpan.textContent = `${hh}:${mm}`;

        meta.appendChild(userSpan);
        meta.appendChild(timeSpan);

        const content = document.createElement("div");
        content.classList.add("message-content");
        content.textContent = text;

        newMsg.appendChild(meta);
        newMsg.appendChild(content);

        // messages ì˜ì—­ì— ì¶”ê°€í•˜ê³ , ë§¨ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤
        const messagesDiv = document.getElementById("messages");
        messagesDiv.insertBefore(
          newMsg,
          document.getElementById("bottom-anchor")
        );
        messagesDiv.scrollTop = messagesDiv.scrollHeight;

        // ì…ë ¥ì°½ ë¹„ìš°ê¸°
        inputEl.value = "";
      });
    </script>
  </body>
</html>
